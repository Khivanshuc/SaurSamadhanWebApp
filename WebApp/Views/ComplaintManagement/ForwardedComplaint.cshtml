<link href="~/css/complaintmanagement.css" rel="stylesheet" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" />
<link href="~/library/select2.min.css" rel="stylesheet" />
<style>
    /* Universal Loader CSS */
    #universalLoader {
        display: none; /* Hidden by default */
        position: fixed;
        z-index: 9999;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.9);
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .spinner {
        width: 64px;
        height: 64px;
        border: 8px solid rgba(0, 0, 0, 0.1);
        border-left-color: #3498db;
        border-radius: 50%;
        animation: spin 1.2s linear infinite;
    }

    @@keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    .modal {
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .modal-content {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        width: 400px;
        text-align: center;
    }

    .close {
        float: right;
        font-size: 24px;
        cursor: pointer;
    }

    .hide {
        display: none;
    }
</style>

<div id="universalLoader">
    <div class="spinner"></div>
</div>

<div id="popupModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div id="popupContent"></div>
    </div>
</div>

<div id="forwardedGrievanceType">
    <div id="forwardedGrievance"></div>
    <div id="revertedRejectedGrievance"></div>
</div>

<div id="filterHeader" class="row justify-content-center mt-md-3">
    <h2>Forwarded Grievance List</h2>
    <button id="backToDashButton" class="btn btn-back-to-dash" onclick="forwardedGrievanceHomeBtnClicked()">
        <img src="~/img/Home_icon.png" alt="Alternate Text" class="home-icon">
    </button>

    <div class="col-12">
        <form class="p-4 border rounded shadow-sm bg-light">
            <div class="row g-3 mt-3 mb-3">
                <!-- First column -->
                <div class="col-12 col-md-6 col-lg-4" id="Size1">
                    <div class="d-flex align-items-center">
                        <select id="SystemIntegrator" class="form-control custom-dropdown">
                            <option value="0">Select System Integrator</option>
                        </select>
                        @* <span class="dropdown-arrow"></span> *@
                    </div>
                </div>

                <div class="col-12 col-md-6 col-lg-4" id="Size1">
                    <div class="d-flex align-items-center">
                        <select id="District" class="form-control custom-dropdown">
                            <option value="0">Select District</option>
                        </select>
                        <span class="dropdown-arrow"></span>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-lg-4" id="Size1">
                    <div class="d-flex align-items-center">
                        <select id="statusFilter" name="statusFilter" class="form-control custom-dropdown">
                          <option value="0" selected>Select Forwarding Status</option> 
                        </select>

                        <span class="dropdown-arrow"></span>
                    </div>
                </div>

@*                 <!-- Inspection ID Search -->
                <div class="col-12 col-md-6 col-lg-4" id="Size">
                    <div class="d-flex align-items-center">
                        <input id="GrievanceComplaintId" type="text" class="form-control search-box" placeholder="Grievance Id">
                    </div>
                </div> *@
            </div>

            <div class="row">
                <!-- Search and Clear Buttons -->
                <div class="col-12 col-md-12 col-lg-12 d-flex justify-content-end justify-content-lg-end">
                    @* <button type="button" class="btn btn-primary" id="searchButton" onclick="SearchGrievanceData()" style=""><img src="~/img/Search_icon.png" alt="" class="search_icon" />SEARCH</button> *@
                    <button type="button" class="btn btn-primary ms-2" id="clearButton" onclick="ClearAllDropDown()"><img src="~/img/Clear_icon.png" alt="Alternate Text" class="clear_icon" />CLEAR</button>
                    <button type="button" class="btn btn-primary ms-2" id="DownloadButton" onclick="grievanceForwardListDownloadClicked()"><img src="~/img/Download_icon.png" alt="" class="download_icon" />DOWNLOAD</button>
                </div>
            </div>
        </form>
    </div>
</div>

<div id="forwardedComplaintListPartialView"></div>
<div id="forwardedComplaintDetailPartialView"></div>


<script src="~/vendor/libs/jquery/jquery.js"></script>
<script src="~/js/bootstrap.bundle.min.js"></script>
@* <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> *@
<script src="~/js/complaintmanagement.js"></script>
<script src="~/library/select2.min.js" defer></script>
<script>
    $(document).ready(function () {
        getSI();
        getDist();
        getStatus();
        getForwardedComplaintList();

        $("#SystemIntegrator, #District, #statusFilter").on("change", function () {
            getForwardedComplaintList();
        });
    });
</script>