 @model List<WebApp.Models.VwJJMAlreadyCompletedListModel>
@{
    ViewData["Title"] = "District Wise Project | CREDA";
}


<!-- Font Awesome (for icons) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<!-- Optional: Bootstrap CSS (for tooltip) -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

<style>
    /* Universal Loader CSS */
    #universalLoader {
        display: none; /* Hidden by default */
        position: fixed;
        z-index: 9999;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.9);
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .spinner {
        width: 64px;
        height: 64px;
        border: 8px solid rgba(0, 0, 0, 0.1);
        border-left-color: #3498db;
        border-radius: 50%;
        animation: spin 1.2s linear infinite;
    }


    @@keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    .form-control:disabled {
        opacity: 0.5 !important;
        cursor: not-allowed !important;
    }
</style>
<div id="universalLoader">
    <div class="spinner"></div>
</div>

<div id="FaultFiltersView">
    <div class="row justify-content-center mt-md-3">
        <h2>Project Reports</h2>
        <button id="backToDashButton" class="btn btn-back-to-dash" onclick="BackToDashboard();">
            <img src="~/img/Home_icon.png" alt="Alternate Text" class="home-icon">
        </button>
        <div class="col-12">
            <form class="p-4 border rounded shadow-sm bg-light">
                <!-- First row of fields -->

                <div class="row g-3 mb-3" id="setfild">

                    <!-- First column -->
                    <div class="col-12 col-md-6 col-lg-3 mt-0">
                        <div class="d-flex align-items-center" id="down">
                            <select id="WorkingStatus" class="form-control custom-dropdown" onchange="GlanceWorkingStatusClicked()">
                                <option value="-1">Select Status</option>
                                <option value="1">Working</option>
                                <option value="0">Not Working</option>
                            </select>
                            <span class="dropdown-arrow"></span>
                        </div>
                    </div>

                    <!-- Start Date Picker column -->
                    <div class="col-12 col-md-6 col-lg-4 ms-2" id="Size1" style="width:26.1%!important">
                        <div class="d-flex align-items-center">
                            <!-- Date Picker Input -->
                            <i class="fas fa-question-circle mr-3" data-toggle="tooltip" data-placement="top" title="कृपया दिनांक फ़िल्टर लागू करने के लिए चेकबॉक्स का चयन करें|" style="opacity:0.5;"></i>
                            <input type="checkbox" id="dateFilter" onchange="dateFilterClicked(this)" style="margin-right:10px;height: 38px;width: 18px;" />
                            <input type="date" id="StartDate" class="form-control custom-dropdown ms-2" onchange="startDatePickerChanged(this)" disabled>
                        </div>
                    </div>

                    <!-- Last Date Picker column -->
                    <div class="col-12 col-md-6 col-lg-4" id="Size">
                        <div class="d-flex align-items-center">
                            <!-- Date Picker Input -->
                            <input type="date" id="EndDate" class="form-control custom-dropdown  ms-2" onchange="endDatePickerChanged(this)" disabled>
                        </div>
                    </div>

                    <!-- Search and Clear Buttons -->
                    <div class="col-12 col-md-12 col-lg-2 d-flex justify-content-end" id="set-downlod-report-btn">
                        <button type="button" class="btn btn-primary ms-2" id="DownloadButton" onclick="downloadReportCountClicked()"><img src="~/img/Download_icon.png" alt="" class="download_icon" /> DOWNLOAD</button>
                    </div>

                </div>
            </form>
        </div>
    </div>
</div>

<div id="ProjectReportCountPartialView"></div>
<div id="ProjectReportCountListDetailPartialView"></div>


@section PageScripts {
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="~/js/downloadreports.js"></script>
    <script>

        $(document).ready(async function () {
            $('[data-toggle="tooltip"]').tooltip();

            await loadOneMonthAgoDate();
            await SearchProjectReportCount();
        });

        document.addEventListener("DOMContentLoaded", function () {
            // Get today's date
            var today = new Date();

            // Format the date to yyyy-MM-dd
            var day = ("0" + today.getDate()).slice(-2);
            var month = ("0" + (today.getMonth() + 1)).slice(-2);
            var formattedDate = today.getFullYear() + '-' + month + '-' + day;

            // Set the date picker's value to today
            document.getElementById('StartDate').value = formattedDate;
            document.getElementById('EndDate').value = formattedDate;
        });

        // document.getElementById('backToDashButton').addEventListener('click', function () {
        //     BackToDashboard();
        // });
        // document.getElementById('backToListButton').addEventListener('click', function () {
        //     DownlodToReports();
        // })
    </script>
}